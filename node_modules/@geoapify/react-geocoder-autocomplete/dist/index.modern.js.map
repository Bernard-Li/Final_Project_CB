{"version":3,"file":"index.modern.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { useEffect, useRef, MutableRefObject } from \"react\";\nimport {\n  GeocoderAutocomplete,\n  LocationType,\n  SupportedLanguage,\n  GeoPosition,\n  CountyCode,\n  ByCountryCodeOptions,\n  ByCircleOptions,\n  ByRectOptions,\n  ByProximityOptions,\n} from \"@geoapify/geocoder-autocomplete\";\n\nexport const GeoapifyApiKey = React.createContext<string>(\"\");\n\nexport const GeoapifyContext = (props: any) => {\n  return (\n    <GeoapifyApiKey.Provider value={props.apiKey}>\n      {props.children}\n    </GeoapifyApiKey.Provider>\n  );\n};\n\nexport interface GeoapifyGeocoderAutocompleteOptions {\n  value?: string;\n  type?: LocationType;\n  lang?: SupportedLanguage;\n  limit?: number;\n  placeholder?: string;\n  filterByCountryCode?: ByCountryCodeOptions;\n  filterByCircle?: ByCircleOptions;\n  filterByRect?: ByRectOptions;\n  biasByCountryCode?: ByCountryCodeOptions;\n  biasByCircle?: ByCircleOptions;\n  biasByRect?: ByRectOptions;\n  biasByProximity?: ByProximityOptions;\n  position?: GeoPosition;\n  countryCodes?: CountyCode[];\n\n  skipIcons?: boolean;\n  skipDetails?: boolean;\n\n  placeSelect?: (value: any) => void;\n  suggestionsChange?: (value: any) => void;\n\n  preprocessHook?: (value: string) => string;\n  postprocessHook?: (feature: any) => string;\n  suggestionsFilter?: (suggestions: any[]) => any[];\n\n  onUserInput?: (input: string) => void;\n  onOpen?: (opened: boolean) => void;\n  onClose?: (opened: boolean) => void;\n}\n\nexport const GeoapifyGeocoderAutocomplete = ({\n  placeholder: placeholderValue,\n  type: typeValue,\n  lang: langValue,\n  limit: limitValue,\n  value: valueValue,\n  filterByCountryCode: filterByCountryCodeValue,\n  filterByCircle: filterByCircleValue,\n  filterByRect: filterByRectValue,\n  biasByCountryCode: biasByCountryCodeValue,\n  biasByCircle: biasByCircleValue,\n  biasByRect: biasByRectValue,\n  biasByProximity: biasByProximityValue,\n  position: positionValue,\n  countryCodes: countryCodesValue,\n  skipIcons: skipIconsValue,\n  skipDetails: skipDetailsValue,\n  preprocessHook: preprocessHookValue,\n  postprocessHook: postprocessHookValue,\n  suggestionsFilter: suggestionsFilterValue,\n  placeSelect: placeSelectCallback,\n  suggestionsChange: suggestionsChangeCallback,\n  onUserInput: userInputCallback,\n  onOpen: openCallback,\n  onClose: closeCallback,\n}: GeoapifyGeocoderAutocompleteOptions) => {\n  const apiKey = React.useContext<string>(GeoapifyApiKey);\n  let geocoderContainer: HTMLDivElement | null;\n  let initialized: boolean = false;\n  let geocoderAutocomplete: MutableRefObject<\n    GeocoderAutocomplete | undefined\n  > = useRef<GeocoderAutocomplete>();\n\n  const placeSelectCallbackRef: MutableRefObject<\n    ((value: any) => void) | undefined\n  > = useRef<(value: any) => void>();\n\n  const suggestionsChangeCallbackRef: MutableRefObject<\n    ((value: any) => void) | undefined\n  > = useRef<(value: any) => void>();\n\n  const userInputCallbackRef: MutableRefObject<\n    ((input: string) => void) | undefined\n  > = useRef<(input: string) => void>();\n\n  const openCallbackRef: MutableRefObject<\n    ((opened: boolean) => void) | undefined\n  > = useRef<(opened: boolean) => void>();\n\n  const closeCallbackRef: MutableRefObject<\n    ((opened: boolean) => void) | undefined\n  > = useRef<(opened: boolean) => void>();\n\n  placeSelectCallbackRef.current = placeSelectCallback;\n  suggestionsChangeCallbackRef.current =  suggestionsChangeCallback;\n\n  userInputCallbackRef.current = userInputCallback;\n  openCallbackRef.current = openCallback;\n  closeCallbackRef.current = closeCallback;\n\n  const onSelect = React.useCallback((value: any) => {\n    if (placeSelectCallbackRef.current) {\n      placeSelectCallbackRef.current(value);\n    }\n  },[]);\n\n  const onSuggestions = React.useCallback((value: any) => {\n    if (suggestionsChangeCallbackRef.current) {\n      suggestionsChangeCallbackRef.current(value);\n    }\n  },[]);\n\n  const onUserInput = React.useCallback((input: string) => {\n    if (userInputCallbackRef.current) {\n      userInputCallbackRef.current(input);\n    }\n  },[]);\n\n  const onOpen = React.useCallback((opened: boolean) => {\n    if (openCallbackRef.current) {\n      openCallbackRef.current(opened);\n    }\n  },[]);\n\n  const onClose = React.useCallback((opened: boolean) => {\n    if (closeCallbackRef.current) {\n      closeCallbackRef.current(opened);\n    }\n  },[]);\n\n  useEffect(() => {\n    if (initialized) {\n      if (geocoderAutocomplete.current) {\n        geocoderAutocomplete.current.off(\"select\", onSelect);\n        geocoderAutocomplete.current.off(\"suggestions\", onSuggestions);\n        geocoderAutocomplete.current.off(\"input\", onUserInput);\n        geocoderAutocomplete.current.off(\"close\", onClose);\n        geocoderAutocomplete.current.off(\"open\", onOpen);\n      }\n\n      return;\n    }\n\n    initialized = true;\n\n    geocoderAutocomplete.current = new GeocoderAutocomplete(\n      geocoderContainer as HTMLDivElement,\n      apiKey,\n      {\n        placeholder: placeholderValue || \"\",\n        skipDetails: skipDetailsValue,\n        skipIcons: skipIconsValue\n      }\n    );\n\n    geocoderAutocomplete.current.on(\"select\", onSelect);\n    geocoderAutocomplete.current.on(\"suggestions\", onSuggestions);\n    geocoderAutocomplete.current.on(\"input\", onUserInput);\n    geocoderAutocomplete.current.on(\"close\", onClose);\n    geocoderAutocomplete.current.on(\"open\", onOpen);\n  }, []);\n\n  useEffect(() => {\n    if (geocoderAutocomplete.current) {\n      geocoderAutocomplete.current.setType(typeValue as LocationType);\n    }\n  }, [typeValue]);\n\n  useEffect(() => {\n    if (geocoderAutocomplete.current) {\n      geocoderAutocomplete.current.setLang(langValue as SupportedLanguage);\n    }\n  }, [langValue]);\n\n  useEffect(() => {\n    if (geocoderAutocomplete.current) {\n      console.warn(\n        \"WARNING! Obsolete function called. The  'position' input has been deprecated, please use the new 'biasByLocation' input instead!\"\n      );\n      geocoderAutocomplete.current.addBiasByProximity(\n        positionValue as GeoPosition\n      );\n    }\n  }, [positionValue]);\n\n  useEffect(() => {\n    if (geocoderAutocomplete.current) {\n      console.warn(\n        \"WARNING! Obsolete function called. The  'countryCodes' input has been deprecated, please use the new 'filterByCountryCode' input instead!\"\n      );\n      geocoderAutocomplete.current.addFilterByCountry(\n        countryCodesValue as CountyCode[]\n      );\n    }\n  }, [countryCodesValue]);\n\n  useEffect(() => {\n    if (geocoderAutocomplete.current) {\n      geocoderAutocomplete.current.setLimit(limitValue as number);\n    }\n  }, [limitValue]);\n\n  useEffect(() => {\n    if (geocoderAutocomplete.current) {\n      geocoderAutocomplete.current.setValue((valueValue as string) || \"\");\n    }\n  }, [valueValue]);\n\n  useEffect(() => {\n    if (geocoderAutocomplete.current) {\n      geocoderAutocomplete.current.addFilterByCountry(\n        filterByCountryCodeValue as ByCountryCodeOptions\n      );\n    }\n  }, [filterByCountryCodeValue]);\n\n  useEffect(() => {\n    if (geocoderAutocomplete.current) {\n      geocoderAutocomplete.current.addFilterByCircle(\n        filterByCircleValue as ByCircleOptions\n      );\n    }\n  }, [filterByCircleValue]);\n\n  useEffect(() => {\n    if (geocoderAutocomplete.current) {\n      geocoderAutocomplete.current.addFilterByRect(\n        filterByRectValue as ByRectOptions\n      );\n    }\n  }, [filterByRectValue]);\n\n  useEffect(() => {\n    if (geocoderAutocomplete.current) {\n      geocoderAutocomplete.current.addBiasByCountry(\n        biasByCountryCodeValue as ByCountryCodeOptions\n      );\n    }\n  }, [biasByCountryCodeValue]);\n\n  useEffect(() => {\n    if (geocoderAutocomplete.current) {\n      geocoderAutocomplete.current.addBiasByCircle(\n        biasByCircleValue as ByCircleOptions\n      );\n    }\n  }, [biasByCircleValue]);\n\n  useEffect(() => {\n    if (geocoderAutocomplete.current) {\n      geocoderAutocomplete.current.addBiasByRect(\n        biasByRectValue as ByRectOptions\n      );\n    }\n  }, [biasByRectValue]);\n\n  useEffect(() => {\n    if (geocoderAutocomplete.current) {\n      geocoderAutocomplete.current.addBiasByProximity(\n        biasByProximityValue as ByProximityOptions\n      );\n    }\n  }, [biasByProximityValue]);\n\n  useEffect(() => {\n    if (geocoderAutocomplete.current) {\n      geocoderAutocomplete.current.setPreprocessHook(\n        preprocessHookValue\n      );\n    }\n  }, [preprocessHookValue]);\n\n  useEffect(() => {\n    if (geocoderAutocomplete.current) {\n      geocoderAutocomplete.current.setPostprocessHook(\n        postprocessHookValue\n      );\n    }\n  }, [postprocessHookValue]);\n\n  useEffect(() => {\n    if (geocoderAutocomplete.current) {\n      geocoderAutocomplete.current.setSuggestionsFilter(\n        suggestionsFilterValue\n      );\n    }\n  }, [suggestionsFilterValue]);\n\n  return (\n    <div\n      className=\"geocoder-container\"\n      style={{ position: \"relative\" }}\n      ref={(el) => (geocoderContainer = el)}\n    ></div>\n  );\n};\n"],"names":["GeoapifyApiKey","React","createContext","GeoapifyContext","props","Provider","value","apiKey","children","GeoapifyGeocoderAutocomplete","placeholderValue","placeholder","typeValue","type","langValue","lang","limitValue","limit","valueValue","filterByCountryCodeValue","filterByCountryCode","filterByCircleValue","filterByCircle","filterByRectValue","filterByRect","biasByCountryCodeValue","biasByCountryCode","biasByCircleValue","biasByCircle","biasByRectValue","biasByRect","biasByProximityValue","biasByProximity","positionValue","position","countryCodesValue","countryCodes","skipIconsValue","skipIcons","skipDetailsValue","skipDetails","preprocessHookValue","preprocessHook","postprocessHookValue","postprocessHook","suggestionsFilterValue","suggestionsFilter","placeSelectCallback","placeSelect","suggestionsChangeCallback","suggestionsChange","userInputCallback","onUserInput","openCallback","onOpen","closeCallback","onClose","useContext","geocoderContainer","initialized","geocoderAutocomplete","useRef","placeSelectCallbackRef","suggestionsChangeCallbackRef","userInputCallbackRef","openCallbackRef","closeCallbackRef","current","onSelect","useCallback","onSuggestions","input","opened","useEffect","off","GeocoderAutocomplete","on","setType","setLang","console","warn","addBiasByProximity","addFilterByCountry","setLimit","setValue","addFilterByCircle","addFilterByRect","addBiasByCountry","addBiasByCircle","addBiasByRect","setPreprocessHook","setPostprocessHook","setSuggestionsFilter","className","style","ref","el"],"mappings":"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"}